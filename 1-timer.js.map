{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from \"flatpickr\";\n// Додатковий імпорт стилів\nimport \"flatpickr/dist/flatpickr.min.css\";\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport iconFail from '../img/error.svg';\n\n// обєкт параметрів\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        console.log(selectedDates[0]);\n        // вибираєм вибраний час\n        const selectedTime = selectedDates[0].getTime();\n        // і поточний час\n        const nowTime = Date.now();\n\n        // якщо вибраний час менше рівний поточному\n        if (selectedTime <= nowTime) {\n            refs.startBtn.disabled = true;\n            userSelectedDate = null;\n\n            // повертаєм з пакета ізітоаст метод еррор\n            return iziToast.error({\n                messageColor: \"#FFFFFF\",\n                message: \"Please choose a date in the future\",\n                backgroundColor: \"#EF4040\",\n                iconUrl: iconFail,\n                timeout: 5000,\n                title: 'Error',\n                titleColor: '#fff',\n            })\n        }\n        // якщо ні то записуєм в юзер селектед дейт значення  в мс вибрану користувачем дату\n        else {\n            refs.startBtn.disabled = false;\n            userSelectedDate = selectedDates[0];\n        }\n    },\n};\n\n// вибираєм ел з дом дерева\nconst refs = {\n    startBtn: document.querySelector('[data-start]'),\n    days: document.querySelector('[data-days]'),\n    hours: document.querySelector('[data-hours]'),\n    minutes: document.querySelector('[data-minutes]'),\n    seconds: document.querySelector('[data-seconds]'),\n    field: document.querySelector('#datetime-picker'),\n}\n\n\n// новий екземпляр класу з пакету флетпікр\nconst createDatePicker = new flatpickr('#datetime-picker', options);\n// кнопка  не актив\nrefs.startBtn.disabled = true;\n\nconst onStartHandle = evt => {\n    refs.startBtn.disabled = true;\n\n    // інтервал в 1с в якому щосекунди обробляється поточна дата і дата вибрана користувачем\n    const timerId = setInterval(() => {\n        const startTime = Date.now();\n        const endTime = userSelectedDate.getTime();\n        const timeDiff = endTime - startTime;\n        refs.field.disabled = true;\n\n// якщо значення обробки менше або рівне 0 то припиняєм виконання інтервалу і повертаєм інпут і кнопку в актив стан\n        if (timeDiff <= 0) {\n            clearInterval(timerId);\n\n            refs.startBtn.disabled = false;\n            refs.field.disabled = false;\n            return;\n        }\n        convertedTime(convertMs(timeDiff));\n    }, 1000)\n}\n\n// записуєм за допомогою контенттекст значення \nfunction convertedTime({ days, hours, minutes, seconds}){\n    refs.days.textContent = addLeadingZero(days);\n    refs.hours.textContent = addLeadingZero(hours);\n    refs.minutes.textContent = addLeadingZero(minutes);\n    refs.seconds.textContent = addLeadingZero(seconds);\n}\n\n// добавляєм 0 якщо в рядку 1 символ  \nfunction addLeadingZero(num) {\n    return String(num).padStart(2, '0');\n}\n\n// оброблювач подій\nrefs.startBtn.addEventListener('click', onStartHandle);\n\n// 00:00:00:00\nlet userSelectedDate = null;\n\n\n\n// підрахунку значень\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["options","selectedDates","selectedTime","nowTime","refs","userSelectedDate","iziToast","iconFail","flatpickr","onStartHandle","evt","timerId","startTime","timeDiff","convertedTime","convertMs","days","hours","minutes","seconds","addLeadingZero","num","ms"],"mappings":"qIAYA,MAAMA,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnB,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAE5B,MAAMC,EAAeD,EAAc,CAAC,EAAE,QAAO,EAEvCE,EAAU,KAAK,MAGrB,GAAID,GAAgBC,EAChB,OAAAC,EAAK,SAAS,SAAW,GACzBC,EAAmB,KAGZC,EAAS,MAAM,CAClB,aAAc,UACd,QAAS,qCACT,gBAAiB,UACjB,QAASC,EACT,QAAS,IACT,MAAO,QACP,WAAY,MAC5B,CAAa,EAIDH,EAAK,SAAS,SAAW,GACzBC,EAAmBJ,EAAc,CAAC,CAEzC,CACL,EAGMG,EAAO,CACT,SAAU,SAAS,cAAc,cAAc,EAC/C,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,EAChD,MAAO,SAAS,cAAc,kBAAkB,CACpD,EAIyB,IAAII,EAAU,mBAAoBR,CAAO,EAElEI,EAAK,SAAS,SAAW,GAEzB,MAAMK,EAAgBC,GAAO,CACzBN,EAAK,SAAS,SAAW,GAGzB,MAAMO,EAAU,YAAY,IAAM,CAC9B,MAAMC,EAAY,KAAK,MAEjBC,EADUR,EAAiB,UACNO,EAI3B,GAHAR,EAAK,MAAM,SAAW,GAGlBS,GAAY,EAAG,CACf,cAAcF,CAAO,EAErBP,EAAK,SAAS,SAAW,GACzBA,EAAK,MAAM,SAAW,GACtB,MACH,CACDU,EAAcC,EAAUF,CAAQ,CAAC,CACpC,EAAE,GAAI,CACX,EAGA,SAASC,EAAc,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAE,CACpDf,EAAK,KAAK,YAAcgB,EAAeJ,CAAI,EAC3CZ,EAAK,MAAM,YAAcgB,EAAeH,CAAK,EAC7Cb,EAAK,QAAQ,YAAcgB,EAAeF,CAAO,EACjDd,EAAK,QAAQ,YAAcgB,EAAeD,CAAO,CACrD,CAGA,SAASC,EAAeC,EAAK,CACzB,OAAO,OAAOA,CAAG,EAAE,SAAS,EAAG,GAAG,CACtC,CAGAjB,EAAK,SAAS,iBAAiB,QAASK,CAAa,EAGrD,IAAIJ,EAAmB,KAKvB,SAASU,EAAUO,EAAI,CAQrB,MAAMN,EAAO,KAAK,MAAMM,EAAK,KAAG,EAE1BL,EAAQ,KAAK,MAAOK,EAAK,MAAO,IAAI,EAEpCJ,EAAU,KAAK,MAAQI,EAAK,MAAO,KAAQ,GAAM,EAEjDH,EAAU,KAAK,MAASG,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}